<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‹¤ì‹œê°„ ì£¼ë¬¸ ì‹œìŠ¤í…œ</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        .order-btn {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .status { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

<h1>ğŸ›ï¸ ìƒí’ˆ ì£¼ë¬¸í•˜ê¸°</h1>

<p>ìƒí’ˆ ID: 101, ìˆ˜ëŸ‰: 1ê°œ</p>

<button class="order-btn" onclick="sendOrder()">ì£¼ë¬¸ ìš”ì²­ ë³´ë‚´ê¸°</button>

<div class="status">
    <p id="status-message">ì£¼ë¬¸ ìƒíƒœ: ëŒ€ê¸° ì¤‘</p>
</div>

<script>
    // ë°±ì—”ë“œ Order Serviceì˜ API ì—”ë“œí¬ì¸íŠ¸
    const ORDER_API_URL = 'http://localhost:8081/orders';

    function sendOrder() {
        const statusMessage = document.getElementById('status-message');
        statusMessage.textContent = 'ì£¼ë¬¸ ìƒíƒœ: ìš”ì²­ ì²˜ë¦¬ ì¤‘...';

        // 1. ì„œë²„ë¡œ ë³´ë‚¼ ë°ì´í„° (OrderCreationRequest DTOì— ëŒ€ì‘)
        const orderData = {
            productId: 101, // ì˜ˆì‹œ ìƒí’ˆ ID
            quantity: 1     // ì˜ˆì‹œ ìˆ˜ëŸ‰
        };

        // 2. Fetch APIë¥¼ ì‚¬ìš©í•˜ì—¬ POST ìš”ì²­ ì „ì†¡
        fetch(ORDER_API_URL, {
            method: 'POST', // POST ë©”ì†Œë“œ ì‚¬ìš©
            headers: {
                'Content-Type': 'application/json' // JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ì „ì†¡ ëª…ì‹œ
            },
            body: JSON.stringify(orderData) // JavaScript ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
        })
        .then(response => {
            if (response.ok) {
                // HTTP ìƒíƒœ ì½”ë“œ 2xx (ì„±ê³µ)ì¼ ê²½ìš°
                return response.json(); // ì‘ë‹µ ë³¸ë¬¸ì„ JSONìœ¼ë¡œ íŒŒì‹±
            } else {
                // HTTP ìƒíƒœ ì½”ë“œ 4xx, 5xx (ì‹¤íŒ¨)ì¼ ê²½ìš°
                throw new Error(`ì£¼ë¬¸ ì‹¤íŒ¨. ìƒíƒœì½”ë“œ: ${response.status}`);
            }
        })
        .then(data => {
            // ì£¼ë¬¸ ì„±ê³µ ì‹œ
            statusMessage.textContent = `âœ… ì£¼ë¬¸ ì„±ê³µ! ì£¼ë¬¸ ID: ${data.id || 'N/A'}`;
            console.log('ì£¼ë¬¸ ì‘ë‹µ ë°ì´í„°:', data);
        })
        .catch(error => {
            // í†µì‹  ìì²´ ì‹¤íŒ¨ ë˜ëŠ” ì‘ë‹µ ì‹¤íŒ¨ ì²˜ë¦¬
            statusMessage.textContent = `âŒ ì£¼ë¬¸ ì‹¤íŒ¨: ${error.message}`;
            console.error('ì˜¤ë¥˜ ë°œìƒ:', error);
        });
    }
</script>

</body>
</html>