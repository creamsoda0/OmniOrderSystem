# application.yml (Order Service)

# --- [ Spring ì„¤ì • ë¸”ë¡: ëª¨ë“  spring ê´€ë ¨ ì„¤ì •ì„ ì—¬ê¸°ì— ë„£ìŠµë‹ˆë‹¤. ] ---
spring:
  # 1. Datasource ì„¤ì •
  datasource:

  # 2. JPA ì„¤ì •
  # JPA (Hibernate) ì„¤ì •
  jpa:
    hibernate:
      # ğŸ›‘ updateê°€ ì•„ë‹ˆë¼ validateë¡œ ë°”ê¿‰ë‹ˆë‹¤! (ê°€ì¥ ì¤‘ìš”)
      # validate: ìë°” ì—”í‹°í‹°ì™€ ì‹¤ì œ DB í…Œì´ë¸”ì´ ë§ëŠ”ì§€ ê²€ì‚¬ë§Œ í•¨ (ìˆ˜ì • X)
      ddl-auto: validate
    defer-datasource-initialization: false # Flywayê°€ ë¨¼ì € ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë¯€ë¡œ false

  # 2. Flyway ì„¤ì • ì¶”ê°€
  flyway:
    enabled: true
    baseline-on-migrate: true

    # ğŸ‘‡ [í•µì‹¬] ì´ ë‘ ì¤„ì„ ê¼­ ì¶”ê°€í•˜ì„¸ìš”!
    clean-disabled: false           # DB ì´ˆê¸°í™”(Clean) ê¸°ëŠ¥ì„ ì¼­ë‹ˆë‹¤.
    clean-on-validation-error: true # ì²´í¬ì„¬ ì—ëŸ¬ê°€ ë‚˜ë©´ DBë¥¼ ì‹¹ ì§€ìš°ê³  ë‹¤ì‹œ ë§Œë“­ë‹ˆë‹¤.

  # 3. Application Name ì„¤ì •
  application:
    name: order-service
  profiles:
    active: local # ê¸°ë³¸ê°’ì€ ë¡œì»¬
  # --- [ë¡œì»¬ í™˜ê²½: Eureka ì‚¬ìš©] ---
  eureka:
    client:
      register-with-eureka: true
      fetch-registry: true
      service-url:
        defaultZone: http://localhost:8761/eureka/

  # 4. Redis ì„¤ì • (spring í•˜ìœ„ì— data:redis êµ¬ì¡°ë¡œ ë°°ì¹˜)
  data:
    redis:
      host: localhost
      port: 6379

# --- [ ìµœìƒìœ„ ì„¤ì • ë¸”ë¡: spring ë¸”ë¡ê³¼ ë™ì¼ ë ˆë²¨ ] ---
  # kafaka ì„¤ì •
kafka:
  # Apache ê³µì‹ ì´ë¯¸ì§€ ì„¤ì •ì— ë§ì¶˜ ìƒˆ ì£¼ì†Œ
  bootstrap-servers: my-kafka-0.my-kafka.default.svc.cluster.local:9092

server:
  port: 8081
  servlet:
    context-path: /order-service # ğŸš¨ Ingressì™€ ì™„ë²½íˆ ì¼ì¹˜í•´ì•¼ í•¨
  forward-headers-strategy: framework # í”„ë¡ì‹œ í—¤ë” ì‹ ë¢° ì„¤ì •

springdoc:
  api-docs:
    path: /order-service/v3/api-docs # â¬…ï¸ Context Pathë¥¼ í¬í•¨í•˜ì—¬ JSON ê²½ë¡œë¥¼ ê°•ì œ ì§€ì •
  swagger-ui:
    disable-swagger-default-url: true # Swagger ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ì§€

