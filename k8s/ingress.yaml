apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: omniorder-ingress
  annotations:
    kubernetes.io/ingress.class: nginx
    # rewrite-target 설정은 모두 삭제하거나 주석 처리해야 합니다!
spec:
  rules:
    - http:
        paths:
          # 1. 주문 서비스 (Order Service): /order-service/로 시작하는 모든 요청
          - path: /order-service/
            pathType: Prefix
            backend:
              service:
                name: order-service
                port: { number: 8081 }

          # 2. 상품 서비스 (Product Service): /product-service/로 시작하는 모든 요청
          - path: /product-service/
            pathType: Prefix
            backend:
              service:
                name: product-service
                port: { number: 8082 }

          # 3. 유레카 연결 (대시보드 보기용)
          - path: /eureka/
            pathType: Prefix
            backend:
              service: { name: eureka-server, port: { number: 8761 } }

          # 4. 루트 경로 (기본 홈페이지 또는 Order Service로 연결)
          - path: /
            pathType: Prefix
            backend:
              service: { name: order-service, port: { number: 8083 } }

          # 5. 메세지 서비스 (Message Service): /Message-service/로 시작하는 모든 요청
          - path: /Message-service/
            pathType: Prefix
            backend:
              service:
                name: message-service
                port: { number: 8083 }