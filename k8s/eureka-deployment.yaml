# eureka-deployment.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: eureka-server-deployment
  labels:
    app: eureka-server
spec:
  replicas: 1 # EurekaëŠ” ì¼ë‹¨ 1ê°œë¡œ ì‹œì‘
  selector:
    matchLabels:
      app: eureka-server
  template:
    metadata:
      labels:
        app: eureka-server
    spec:
      containers:
        - name: eureka-server-container
          # ğŸ³ Docker Hubì— í‘¸ì‹œí•œ ì´ë¯¸ì§€ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
          image: creamdocker/omni-eureka:1.0.0
          ports:
            - containerPort: 8761
          # ğŸ’¡ ì¤‘ìš”: Eureka ì„œë²„ëŠ” ìì‹ ì˜ ê³ ì • ì£¼ì†Œë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
          env:
            - name: EUREKA_CLIENT_SERVICEURL_DEFAULTZONE
              # Service ì´ë¦„ê³¼ Portë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚´ë¶€ ì ‘ê·¼ ì£¼ì†Œë¥¼ ì„¤ì •
              # (ì•„ë˜ Service ì„¹ì…˜ì—ì„œ ì •ì˜í•  ì´ë¦„: eureka-service)
              value: http://eureka-service:8761/eureka/
---
apiVersion: v1
kind: Service
metadata:
  name: eureka-service
spec:
  selector:
    app: eureka-server
  ports:
    - port: 8761       # í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í¬íŠ¸
      targetPort: 8761 # ì»¨í…Œì´ë„ˆ í¬íŠ¸
      nodePort: 30087  # ğŸ’¡ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  í¬íŠ¸ (30000-32767 ë²”ìœ„)
  type: NodePort       # ğŸ’¡ ClusterIP ëŒ€ì‹  NodePortë¡œ ë³€ê²½